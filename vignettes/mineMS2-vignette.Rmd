---
title: "*mineMS2*: Mining of MS fragmentation spectra by frequent subgraph mining."
author: "Alexis Delabriere and Eteinne Thevenot"
date: "`r Sys.Date()`"

vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
bibliography: "mineMS2-vignette.bib"
output: 
  BiocStyle::html_document
---

```{r global_options, include=FALSE}
knitr::opts_chunk$set(fig.width=6, fig.height=6, fig.path='figures/')
```

# Context
Mining interest blablablabla
	* Grpha natural representation. 
	* Efficient algorithm
	* Blablabla
	
# Importing the files
```{r loading, echo=TRUE, warning=FALSE, message=FALSE}
# loading the package
library(mineMS2)
```
```{r paths}
# Findinf the data
path_demo <- system.file("mgf",package="mineMS2")
print(head(list.files(path_demo)))
```
The spectra information are centralized in an *ms2Lib* object. It can take 3 kind of inputs :

	* A vector of filename with compatible format (`mineMS2:::recognisedFormat()`)
	
	* A single directory name in which the files in supported format are stored.
	
	* A list containg Spectrum2 objects.
	

```{r constructor_ms2lib,fig.show="hide",message=FALSE}
m2l <- ms2Lib(path_demo)
m2l

```


#Building the graphs
The graph are built by discretizing the mass losses.
```{r edge_discretization}
m2l <- discretizeMassLosses(m2l,8,0.008,2/length(m2l),precPpm=20,precDmz=0.03,maxFrags=15)
```
#Mining the frequent subgraphs
```{r graph_mining}
m2l <- mineClosedSubgraphs(m2l,num=2,sizeMin = 2, precursor = FALSE)
```
#IDs
The *mineMS2* package include 4 differents data, the spectra, the dags correspoding to these spectra, the losses and and the mined patterns. An ID is associated with each of these elements. When judicious they can be visualized using the *plot* function and searched using the *search*(not implemented) and *exported* functions.

* *Spectra* IDs starts by the *S* letter, they can be plot using the *plot* function, which call the plot function of the msnBase package. They can also be searched against the patterns
```{r spec_plot_example}
plot(m2l,"S45")
```


* *Losses* IDs start by the *L* letter. They can be searched against patterns (*P*) or dags (*D*).

* *DAGs* IDs start by the *D* they can be searched against patterns (*P*). 

* *Patterns* IDs start by the *P* letter, they can be plotted using the *plot* and *plotOccurences functions.



# Session info

Here is the output of `sessionInfo()` on the system on which this document was
compiled:

```{r sessionInfo, echo=FALSE}
sessionInfo()
```
